# Geelato Lite Editor

ä¸€ä¸ªåŸºäº Vue 3 + TypeScript + TipTap çš„è½»é‡çº§å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ç»„ä»¶ï¼Œæä¾›ä¸°å¯Œçš„ç¼–è¾‘åŠŸèƒ½å’Œé«˜åº¦å¯å®šåˆ¶çš„æ‰©å±•æœºåˆ¶ã€‚

## ğŸ“¦ åŒ…å¤§å°

- **ES æ¨¡å—**: ~154KB (gzip: ~32KB)
- **UMD æ¨¡å—**: ~96KB (gzip: ~26KB) 
- **CSS æ ·å¼**: ~36KB (gzip: ~6KB)
- **ç±»å‹å®šä¹‰**: ~3KB

## âœ¨ ç‰¹æ€§

### ğŸ¯ æ ¸å¿ƒåŠŸèƒ½
- **å¯Œæ–‡æœ¬ç¼–è¾‘**: æ”¯æŒç²—ä½“ã€æ–œä½“ã€ä¸‹åˆ’çº¿ã€åˆ é™¤çº¿ã€è¡Œå†…ä»£ç ç­‰åŸºç¡€æ ¼å¼
- **æ ‡é¢˜ç³»ç»Ÿ**: æ”¯æŒ H1-H6 å¤šçº§æ ‡é¢˜ï¼Œå¸¦ä¸‹æ‹‰é€‰æ‹©å™¨
- **åˆ—è¡¨åŠŸèƒ½**: æ— åºåˆ—è¡¨ã€æœ‰åºåˆ—è¡¨ã€ä»»åŠ¡åˆ—è¡¨ï¼ˆå¾…åŠäº‹é¡¹ï¼‰
- **å¼•ç”¨å—**: æ”¯æŒå¤šå±‚çº§å¼•ç”¨å—
- **ä»£ç å—**: æ”¯æŒè¯­æ³•é«˜äº®çš„ä»£ç å—
- **é“¾æ¥ç®¡ç†**: æ™ºèƒ½é“¾æ¥æ’å…¥å’Œç¼–è¾‘ï¼Œæ”¯æŒç‚¹å‡»ç¼–è¾‘
- **å›¾ç‰‡å¤„ç†**: å›¾ç‰‡æ’å…¥ã€æ‹–æ‹½è°ƒæ•´å¤§å°ã€å¯¹é½æ–¹å¼è®¾ç½®
- **è¡¨æ ¼ç¼–è¾‘**: å®Œæ•´çš„è¡¨æ ¼æ“ä½œï¼ˆæ’å…¥ã€åˆ é™¤è¡Œåˆ—ã€åˆå¹¶æ‹†åˆ†å•å…ƒæ ¼ï¼‰
- **æ–‡æœ¬å¯¹é½**: å·¦å¯¹é½ã€å±…ä¸­ã€å³å¯¹é½ã€ä¸¤ç«¯å¯¹é½
- **æ–‡å­—é¢œè‰²**: è‡ªå®šä¹‰æ–‡å­—é¢œè‰²å’Œé«˜äº®æ ‡è®°
- **æ’¤é”€é‡åš**: å®Œæ•´çš„æ“ä½œå†å²ç®¡ç†
- **å¯¼å‡ºåŠŸèƒ½**: æ”¯æŒå¯¼å‡ºé€‚ç”¨äºé‚®ä»¶çš„HTML

### ğŸ¨ ç•Œé¢ç‰¹æ€§
- **ä¸»é¢˜ç³»ç»Ÿ**: æ”¯æŒäº®è‰²/æš—è‰²/è‡ªåŠ¨ä¸»é¢˜åˆ‡æ¢
- **è‡ªå®šä¹‰ä¸»é¢˜è‰²**: å¯é…ç½®ä¸»é¢˜è‰²ï¼Œç»„ä»¶è‡ªåŠ¨é€‚é…
- **å“åº”å¼è®¾è®¡**: æ”¯æŒä¸åŒå°ºå¯¸ï¼ˆsmall/medium/largeï¼‰
- **å·¥å…·æ æ¨¡å¼**: å››ç§é¢„è®¾æ¨¡å¼ï¼ˆfull/simple/minimal/noneï¼‰
- **æµ®åŠ¨é¢æ¿**: æ™ºèƒ½å®šä½çš„é¢œè‰²é€‰æ‹©å™¨å’Œå·¥å…·é¢æ¿
- **çŠ¶æ€æ **: æ˜¾ç¤ºå­—æ•°ç»Ÿè®¡ç­‰ç¼–è¾‘å™¨çŠ¶æ€ä¿¡æ¯

### ğŸ”§ å¼€å‘ç‰¹æ€§
- **TypeScript**: å®Œæ•´çš„ç±»å‹å®šä¹‰å’Œæ™ºèƒ½æç¤º
- **ç»„åˆå¼ API**: åŸºäº Vue 3 Composition API
- **æ‰©å±•æœºåˆ¶**: çµæ´»çš„æ‰©å±•ç³»ç»Ÿï¼Œæ”¯æŒè‡ªå®šä¹‰åŠŸèƒ½
- **äº‹ä»¶ç³»ç»Ÿ**: ä¸°å¯Œçš„äº‹ä»¶å›è°ƒï¼Œä¾¿äºé›†æˆ
- **æ— éšœç¢**: æ”¯æŒé”®ç›˜å¯¼èˆªå’Œå±å¹•é˜…è¯»å™¨

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å®‰è£…

```bash
# ä½¿ç”¨ pnpmï¼ˆæ¨èï¼‰
pnpm install @geelato/lite-editor

# ä½¿ç”¨ npm
npm install @geelato/lite-editor

# ä½¿ç”¨ yarn
yarn add @geelato/lite-editor
```

### æ ·å¼å¯¼å…¥

**é‡è¦**: ä½¿ç”¨ç¼–è¾‘å™¨æ—¶ï¼Œå¿…é¡»å¯¼å…¥æ ·å¼æ–‡ä»¶ä»¥ç¡®ä¿ç¼–è¾‘å™¨æ­£å¸¸æ˜¾ç¤ºå’ŒåŠŸèƒ½å®Œæ•´ã€‚

```javascript
// æ–¹å¼ä¸€ï¼šåœ¨ä¸»å…¥å£æ–‡ä»¶ï¼ˆå¦‚ main.js æˆ– main.tsï¼‰ä¸­å…¨å±€å¯¼å…¥ï¼ˆæ¨èï¼‰
import '@geelato/lite-editor/dist/lite-editor.css'

// æ–¹å¼äºŒï¼šåœ¨ä½¿ç”¨ç¼–è¾‘å™¨çš„ç»„ä»¶ä¸­å•ç‹¬å¯¼å…¥
import '@geelato/lite-editor/dist/lite-editor.css'
```

### åŸºç¡€ä½¿ç”¨

```vue
<template>
  <div>
    <GeelatoLiteEditor
      v-model="content"
      :editable="true"
      :toolbar="'simple'"
      :theme="'auto'"
      :primary-color="'#1890ff'"
      placeholder="è¯·è¾“å…¥å†…å®¹..."
      @change="handleChange"
    />
  </div>
</template>

<script setup lang="ts">
import { ref } from 'vue'
import { GeelatoLiteEditor } from '@geelato/lite-editor'
// å¯¼å…¥æ ·å¼æ–‡ä»¶
import '@geelato/lite-editor/dist/lite-editor.css'
import type { EditorContent } from '@geelato/lite-editor'

const content = ref('<p>Hello World!</p>')

const handleChange = (editorContent: EditorContent) => {
  console.log('HTML:', editorContent.html)
  console.log('JSON:', editorContent.json)
  console.log('Text:', editorContent.text)
}
</script>
```

### é«˜çº§é…ç½®

```vue
<template>
  <GeelatoLiteEditor
    v-model="content"
    :editable="editable"
    :toolbar="toolbarConfig"
    :theme="theme"
    :primary-color="primaryColor"
    :size="size"
    :bordered="true"
    :show-status-bar="true"
    :min-height="'300px'"
    :max-height="'600px'"
    :extensions="customExtensions"
    placeholder="å¼€å§‹ç¼–å†™æ‚¨çš„å†…å®¹..."
    @change="handleChange"
    @focus="handleFocus"
    @blur="handleBlur"
    @selection-change="handleSelectionChange"
  />
</template>

<script setup lang="ts">
import { ref } from 'vue'
import { GeelatoLiteEditor, createExtensions } from '@geelato/lite-editor'
import type { 
  EditorContent, 
  SelectionState, 
  ToolbarConfig,
  ThemeType,
  ComponentSize 
} from '@geelato/lite-editor'

const content = ref('')
const editable = ref(true)
const theme = ref<ThemeType>('auto')
const primaryColor = ref('#1890ff')
const size = ref<ComponentSize>('medium')

// è‡ªå®šä¹‰å·¥å…·æ é…ç½®
const toolbarConfig = ref<ToolbarConfig>({
  mode: 'full',
  items: ['bold', 'italic', '|', 'heading', 'list', '|', 'link', 'image'],
  size: 'medium',
  showSeparator: true
})

// è‡ªå®šä¹‰æ‰©å±•
const customExtensions = createExtensions({
  heading: { levels: [1, 2, 3, 4] },
  link: { openOnClick: false },
  table: { resizable: true, cellMinWidth: 100 }
})

const handleChange = (editorContent: EditorContent) => {
  console.log('å†…å®¹å˜åŒ–:', editorContent)
}

const handleFocus = (event: FocusEvent) => {
  console.log('ç¼–è¾‘å™¨è·å¾—ç„¦ç‚¹')
}

const handleBlur = (event: FocusEvent) => {
  console.log('ç¼–è¾‘å™¨å¤±å»ç„¦ç‚¹')
}

const handleSelectionChange = (selection: SelectionState) => {
  console.log('é€‰æ‹©å˜åŒ–:', selection)
}
</script>
```

## ğŸ“– API æ–‡æ¡£

### ç»„ä»¶å±æ€§

| å±æ€§ | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|--------|------|
| `modelValue` | `string` | `''` | ç¼–è¾‘å™¨å†…å®¹ï¼ˆHTMLæ ¼å¼ï¼‰ |
| `editable` | `boolean` | `true` | æ˜¯å¦å¯ç¼–è¾‘ |
| `placeholder` | `string` | `'è¯·è¾“å…¥å†…å®¹...'` | å ä½ç¬¦æ–‡æœ¬ |
| `theme` | `'light' \| 'dark' \| 'auto'` | `'auto'` | ä¸»é¢˜æ¨¡å¼ |
| `primaryColor` | `string` | `'#1890ff'` | ä¸»é¢˜è‰² |
| `toolbar` | `ToolbarMode \| ToolbarConfig \| boolean` | `'simple'` | å·¥å…·æ é…ç½® |
| `size` | `'small' \| 'medium' \| 'large'` | `'medium'` | ç»„ä»¶å°ºå¯¸ |
| `bordered` | `boolean` | `true` | æ˜¯å¦æ˜¾ç¤ºè¾¹æ¡† |
| `showStatusBar` | `boolean` | `true` | æ˜¯å¦æ˜¾ç¤ºçŠ¶æ€æ  |
| `height` | `string \| number` | - | ç¼–è¾‘å™¨é«˜åº¦ |
| `minHeight` | `string \| number` | `'200px'` | æœ€å°é«˜åº¦ |
| `maxHeight` | `string \| number` | - | æœ€å¤§é«˜åº¦ |
| `autoFocus` | `boolean` | `false` | æ˜¯å¦è‡ªåŠ¨èšç„¦ |
| `extensions` | `Extension[]` | - | è‡ªå®šä¹‰æ‰©å±• |
| `readonly` | `boolean` | `false` | åªè¯»æ¨¡å¼ |
| `disabled` | `boolean` | `false` | ç¦ç”¨çŠ¶æ€ |

### å·¥å…·æ é…ç½®

#### é¢„è®¾æ¨¡å¼
- `'full'`: å®Œæ•´å·¥å…·æ ï¼ŒåŒ…å«æ‰€æœ‰åŠŸèƒ½
- `'simple'`: ç®€åŒ–å·¥å…·æ ï¼ŒåŒ…å«å¸¸ç”¨åŠŸèƒ½
- `'minimal'`: æœ€å°å·¥å…·æ ï¼Œä»…åŸºç¡€æ ¼å¼
- `'none'`: éšè—å·¥å…·æ 

#### è‡ªå®šä¹‰é…ç½®
```typescript
interface ToolbarConfig {
  mode?: ToolbarMode
  items?: string[]  // è‡ªå®šä¹‰æŒ‰é’®åˆ—è¡¨
  size?: ComponentSize
  showSeparator?: boolean
}
```

### äº‹ä»¶

| äº‹ä»¶å | å‚æ•° | è¯´æ˜ |
|--------|------|------|
| `update:modelValue` | `(value: string)` | å†…å®¹æ›´æ–° |
| `change` | `(content: EditorContent)` | å†…å®¹å˜åŒ– |
| `focus` | `(event: FocusEvent)` | è·å¾—ç„¦ç‚¹ |
| `blur` | `(event: FocusEvent)` | å¤±å»ç„¦ç‚¹ |
| `selection-change` | `(selection: SelectionState)` | é€‰æ‹©å˜åŒ– |
| `created` | `(editor: Editor)` | ç¼–è¾‘å™¨åˆ›å»ºå®Œæˆ |
| `destroyed` | `()` | ç¼–è¾‘å™¨é”€æ¯ |

## ğŸ”Œ æ‰©å±•å¼€å‘

### åˆ›å»ºè‡ªå®šä¹‰æ‰©å±•

```typescript
import { Extension } from '@tiptap/core'

// 1. åˆ›å»ºè‡ªå®šä¹‰æ‰©å±•
const MyCustomExtension = Extension.create({
  name: 'myCustomExtension',
  
  addOptions() {
    return {
      // æ‰©å±•é€‰é¡¹
    }
  },
  
  addCommands() {
    return {
      myCommand: () => ({ commands }) => {
        // è‡ªå®šä¹‰å‘½ä»¤é€»è¾‘
        return true
      }
    }
  },
  
  addKeyboardShortcuts() {
    return {
      'Mod-Shift-x': () => this.editor.commands.myCommand()
    }
  }
})

// 2. åœ¨ç¼–è¾‘å™¨ä¸­ä½¿ç”¨
const customExtensions = [
  ...createExtensions(), // åŸºç¡€æ‰©å±•
  MyCustomExtension.configure({
    // é…ç½®é€‰é¡¹
  })
]
```

### è‡ªå®šä¹‰å·¥å…·æ æŒ‰é’®

```typescript
import { useToolbar } from '@geelato/lite-editor'

// 1. å®šä¹‰æŒ‰é’®é…ç½®
const customButton = {
  name: 'myButton',
  icon: 'my-icon', // å›¾æ ‡åç§°
  title: 'æˆ‘çš„æŒ‰é’®',
  command: 'myCommand',
  isActive: (editor) => editor.isActive('myExtension'),
  isDisabled: (editor) => !editor.can().myCommand(),
  action: (editor) => editor.chain().focus().myCommand().run()
}

// 2. æ³¨å†Œåˆ°å·¥å…·æ 
const { registerButton } = useToolbar(editor)
registerButton('myButton', customButton)

// 3. åœ¨å·¥å…·æ é…ç½®ä¸­ä½¿ç”¨
const toolbarConfig = {
  mode: 'custom',
  items: ['bold', 'italic', '|', 'myButton']
}
```

### æ‰©å±•é…ç½®æ¥å£

```typescript
interface ExtensionConfig {
  heading?: {
    levels?: number[]  // æ”¯æŒçš„æ ‡é¢˜çº§åˆ«
  }
  link?: {
    openOnClick?: boolean  // æ˜¯å¦ç‚¹å‡»æ‰“å¼€é“¾æ¥
    HTMLAttributes?: Record<string, any>
  }
  table?: {
    resizable?: boolean  // æ˜¯å¦å¯è°ƒæ•´å¤§å°
    cellMinWidth?: number  // å•å…ƒæ ¼æœ€å°å®½åº¦
    allowTableNodeSelection?: boolean
  }
  codeBlock?: {
    defaultLanguage?: string  // é»˜è®¤è¯­è¨€
    languageClassPrefix?: string
  }
  list?: {
    nested?: boolean  // æ˜¯å¦æ”¯æŒåµŒå¥—
  }
}
```

### ä¸»é¢˜å®šåˆ¶

```typescript
// 1. è‡ªå®šä¹‰ä¸»é¢˜è‰²
const customTheme = {
  primaryColor: '#ff6b35',
  // ç»„ä»¶ä¼šè‡ªåŠ¨ç”Ÿæˆç›¸å…³çš„è‰²å½©å˜é‡
}

// 2. CSS å˜é‡è¦†ç›–
:root {
  --gl-primary-color: #ff6b35;
  --gl-primary-color-light: rgba(255, 107, 53, 0.2);
  --gl-primary-color-dark: rgba(255, 107, 53, 0.8);
  
  /* å…¼å®¹æ ‡é¢˜ä¸‹æ‹‰ç»„ä»¶ */
  --gl-color-primary-light-1: rgba(255, 107, 53, 0.2);
  --gl-color-primary-6: #ff6b35;
}
```

## ğŸ› ï¸ å¼€å‘

### æœ¬åœ°å¼€å‘

```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/geelato-projects/geelato-lite-editor.git
cd geelato-lite-editor

# å®‰è£…ä¾èµ–
pnpm install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
pnpm dev

# æ„å»ºé¡¹ç›®
pnpm build

# é¢„è§ˆæ„å»ºç»“æœ
pnpm preview
```

### é¡¹ç›®ç»“æ„

```
src/
â”œâ”€â”€ components/          # ç»„ä»¶ç›®å½•
â”‚   â”œâ”€â”€ GeelatoLiteEditor.vue  # ä¸»ç¼–è¾‘å™¨ç»„ä»¶
â”‚   â”œâ”€â”€ toolbar/         # å·¥å…·æ ç»„ä»¶
â”‚   â”œâ”€â”€ editor/          # ç¼–è¾‘å™¨æ ¸å¿ƒç»„ä»¶
â”‚   â””â”€â”€ ui/              # UI åŸºç¡€ç»„ä»¶
â”œâ”€â”€ composables/         # ç»„åˆå¼å‡½æ•°
â”‚   â”œâ”€â”€ useEditor.ts     # ç¼–è¾‘å™¨é€»è¾‘
â”‚   â”œâ”€â”€ useToolbar.ts    # å·¥å…·æ é€»è¾‘
â”‚   â””â”€â”€ useTheme.ts      # ä¸»é¢˜é€»è¾‘
â”œâ”€â”€ extensions/          # æ‰©å±•ç›®å½•
â”‚   â”œâ”€â”€ image/           # å›¾ç‰‡æ‰©å±•
â”‚   â”œâ”€â”€ link/            # é“¾æ¥æ‰©å±•
â”‚   â”œâ”€â”€ highlight/       # é«˜äº®æ‰©å±•
â”‚   â””â”€â”€ textColor/       # æ–‡å­—é¢œè‰²æ‰©å±•
â”œâ”€â”€ types/               # ç±»å‹å®šä¹‰
â””â”€â”€ utils/               # å·¥å…·å‡½æ•°
```

## ğŸ“„ è®¸å¯è¯

MIT License

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## ğŸ“ æ”¯æŒ

å¦‚æœ‰é—®é¢˜ï¼Œè¯·é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»ï¼š
- æäº¤ [Issue] github
- å‘é€é‚®ä»¶è‡³ hi@geelato.cn
